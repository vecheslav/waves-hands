<div class="match-card">
  <a [routerLink]="['match', match.address]" class="match-card__inner">
    <div class="match-card__overview" *ngIf="match.status === matchStatus.WaitingForP2">
      <div class="level has-text-centered match-players">
        <div class="level-item">
          <app-match-player [player]="match.creator"></app-match-player>
        </div>
      </div>
      <div class="match-text" [translate]="'CARD.WAITING_PLAYERS'">
        Waiting players...
      </div>
    </div>
    <div class="match-card__overview"
         *ngIf="(match.status === matchStatus.WaitingBothToReveal ||
                 match.status === matchStatus.WaitingP1ToReveal ||
                 match.status === matchStatus.WaitingP2ToReveal)">
      <div class="level has-text-centered match-players">
        <div class="level-item">
          <app-match-player [player]="match.creator"></app-match-player>
        </div>
        <div class="level-item">vs</div>
        <div class="level-item">
          <app-match-player [player]="match.opponent"></app-match-player>
        </div>
      </div>
      <div class="match-text" [translate]="'CARD.WAITING_FIRST'">
        Waiting for the first player...
      </div>
    </div>

    <!--<div class="match-card__overview" *ngIf="match.status === matchStatus.WaitingForDeclare">-->
      <!--<div class="level has-text-centered match-players">-->
        <!--<div class="level-item">-->
          <!--<app-match-player [player]="match.creator"></app-match-player>-->
        <!--</div>-->
        <!--<div class="level-item">vs</div>-->
        <!--<div class="level-item">-->
          <!--<app-match-player [player]="match.opponent"></app-match-player>-->
        <!--</div>-->
      <!--</div>-->
      <!--<div class="match-text" [translate]="'CARD.WAITING_PAYOUT'">-->
        <!--Waiting for payout...-->
      <!--</div>-->
    <!--</div>-->

    <div class="match-card__overview"
         *ngIf="match.status === matchStatus.WaitingForDeclare ||
                match.status === matchStatus.WaitingForPayout ||
                match.status === matchStatus.Done">
      <div class="level has-text-centered match-players match-players--result">
        <div class="level-item">
          <app-match-player [player]="match.creator"></app-match-player>
          <div class="player-status" [class.player-status--winner]="match.result === 0"
            [class.player-status--draw]="match.result === 2" [ngSwitch]="match.result">
            <span *ngSwitchCase="0" [translate]="'CARD.WINNER'">Winner</span>
            <span *ngSwitchCase="1" [translate]="'CARD.LOOSER'">Looser</span>
            <span *ngSwitchCase="2" [translate]="'CARD.DRAW'">Draw</span>
          </div>
        </div>
        <div class="level-item">vs</div>
        <div class="level-item">
          <app-match-player [player]="match.opponent"></app-match-player>
          <div class="player-status" [class.player-status--winner]="match.result === 1"
            [class.player-status--draw]="match.result === 2" [ngSwitch]="match.result">
            <span *ngSwitchCase="0" [translate]="'CARD.LOOSER'">Looser</span>
            <span *ngSwitchCase="1" [translate]="'CARD.WINNER'">Winner</span>
            <span *ngSwitchCase="2" [translate]="'CARD.DRAW'">Draw</span>
          </div>
        </div>
      </div>
    </div>

    <div class="level match-card__details">
      <div class="match-pending"
           *ngIf="match.status > matchStatus.WaitingForP2 &&
                  match.status < matchStatus.WaitingForDeclare &&
                  pendingLeftPercent > 0"
           [ngStyle]="{'width': pendingLeftPercent + '%'}"></div>
      <div class="level-left">
        <div class="level-item">
          <span [translate]="'CARD.BET'">Bet:</span>&nbsp;
          <span class="has-text-primary">1 Waves</span>
        </div>
      </div>
      <div class="level-right match-card__status">
        <div class="level-item">
          <div class="match-status" [ngClass]="['status-' + match.status]" [ngSwitch]="match.status">
            <span *ngSwitchCase="0" [translate]="'CARD.STATUS_OPEN'">Open</span>
            <span *ngSwitchCase="1" [translate]="'CARD.STATUS_PENDING'">Pending</span>
            <span *ngSwitchCase="2" [translate]="'CARD.STATUS_PENDING'">Pending</span>
            <span *ngSwitchCase="3" [translate]="'CARD.STATUS_PENDING'">Pending</span>
            <span *ngSwitchCase="4" [translate]="'CARD.STATUS_PENDING'">Pending</span>
            <span *ngSwitchCase="5" [translate]="'CARD.STATUS_CLOSED'">Closed</span>
            <span *ngSwitchCase="6" [translate]="'CARD.STATUS_CLOSED'">Closed</span>
          </div>
        </div>
      </div>
    </div>
  </a>

  <!-- join -->
  <a [routerLink]="['match', match.address]" class="top-overlay" [hidden]="!startIsShown">
    <div class="top-overlay__inner">
      <button class="button is-primary" [translate]="'CARD.START'">Start Match</button>
    </div>
  </a>

  <!-- cashback -->
  <div class="top-overlay top-overlay--revoke" *ngIf="match.revoked === 1">
    <div class="top-overlay__inner">
      <button class="button is-warning" [translate]="'CARD.REVOKED'" (click)="revoke()">Revoke Bet</button>
    </div>
  </div>

  <!-- payout -->
  <div class="top-overlay top-overlay--payout" *ngIf="match.canDeclare">
    <div class="top-overlay__inner">
      <button class="button is-success" [translate]="'CARD.PAYOUT'" (click)="payout()">Collect Waves</button>
    </div>
  </div>

  <div class="level match-meta">
    <div class="level-left">
      <a href="https://wavesexplorer.com/address/{{ match.address }}" target="_blank" class="match-meta__id">
        #{{ match.address | slice:-5 }}
      </a>
    </div>
    <div class="level-right match-share">
      <app-share-match [url]="shareUrl"></app-share-match>
    </div>
  </div>
</div>
