<div class="game-match">

  <div class="modal is-active">
    <div class="modal-background"></div>
    <div class="modal-content">
      <div class="match-wrapper">

        <div class="notification match-not-available" *ngIf="!keeperIsAvailable">
          Keeper is not available
        </div>

        <div class="notification match-not-available" *ngIf="keeperIsAvailable && !user">
          You are not logged in
        </div>

        <div class="match" *ngIf="keeperIsAvailable && user">
          <div class="match-top" *ngIf="isJoinedToMatch">
            <div class="level">
              <div class="level-left">
                <div class="level selected-hands">
                  <div class="level-item has-text-centered selected-hands__item" *ngFor="let hand of match.creator?.moves">
                    <div [class]="['hand hand--' + hand]"></div>
                  </div>
                </div>
              </div>
              <div class="level-right user-panel user-panel--right">
                <div class="level-left">
                  <div class="user-panel__details">
                    <a href="https://wavesexplorer.com/address/{{ match.creator?.address }}"
                       target="_blank"
                       class="address">{{ match.creator?.address }}</a>
                  </div>
                </div>
                <div class="level-right">
                  <div class="user-panel__avatar">
                    <app-match-player [player]="match.creator"></app-match-player>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="match-stages" [ngSwitch]="stage" *ngIf="!isLoading">
            <div class="match-stage match-stage--select-hands" *ngSwitchCase="0">
              <h2 class="title is-size-4 has-text-grey-dark has-text-centered">Select your hands</h2>
              <div class="level select-hands">
                <div class="level-item has-text-centered" (click)="select(0)">üëäÔ∏è</div>
                <div class="level-item has-text-centered" (click)="select(1)">‚úã</div>
                <div class="level-item has-text-centered" (click)="select(2)">‚úåÔ∏è</div>
              </div>
            </div>

            <div class="match-stage match-stage--created-match has-text-centered" *ngSwitchCase="1">
              <div>
                <span class="is-size-1">ü§ü</span>
              </div>
              <h2 class="title has-text-centered">You created a game</h2>
              <p class="subtitle">Share the game link to friends, or wait for players to join.</p>
              <div class="md-1">
                <app-share-match [url]="shareUrl" [options]="{ type: 'buttons' }"></app-share-match>
              </div>
              <a [routerLink]="['/']">Close window</a>
            </div>

            <div class="match-stage match-stage--result-match" *ngSwitchCase="3">
              result
            </div>
          </div>
          <div class="match-loading" *ngIf="isLoading">
            <app-circle-loader></app-circle-loader>
            <div class="subtitle is-size-6 has-text-centered">Please, wait... Don't close the window</div>
          </div>

          <div class="match-bottom">
            <div class="level">
              <div class="level-left user-panel">
                <div class="level-left">
                  <div class="user-panel__avatar">
                    <app-match-player [player]="user"></app-match-player>
                  </div>
                </div>
                <div class="level-right">
                  <div class="user-panel__details">
                    <a href="https://wavesexplorer.com/address/{{ user?.address }}"
                       target="_blank"
                       class="address">{{ user?.address }}</a>
                  </div>
                </div>
              </div>
              <div class="level-right">
                <div class="level selected-hands">
                  <div class="level-item has-text-centered selected-hands__item" *ngFor="let hand of selectedHandSigns">
                    <div [class]="['hand hand--' + hand]"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
    <button class="modal-close is-large" aria-label="close" (click)="close()"></button>
  </div>

</div>
